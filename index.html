<!doctype html>
<html lang="en">
	<head>
    	<meta charset="utf-8">
    	<meta name="viewport"
    		  content="width=device-width,
    		  		   initial-scale=1,
    		  		   shrink-to-fit=no">
    	<link rel="stylesheet"
    		  href="css/bootstrap.min.css">
    	<link rel="stylesheet"
    		  href="css/style.css">

    	<script defer src="js/jquery-3.4.1.min.js"></script>
    	<script defer src="js/popper.min.js"></script>
		<script defer src="js/bootstrap.bundle.min.js"></script>
		<script defer src="js/main.js"></script>

    	<title>Photoweb</title>
	</head>

	<body>
		<section class="card">
			<div class="card-header
						text-white
						bg-dark">
				<h4 class="font-weight-bold
						   text-center">Photoweb</h4>				
			</div>

			<div class="card-body
						bg-secondary">
				<div class="row">
					<!-- PARTE 1 -->
					<div class="btn-group">
						<button type="button"
								class="btn
									   btn-dark
									   dropdown-toggle
									   font-weight-bold"
								data-toggle="dropdown"
								aria-haspopup="true"
								aria-expanded="false">Filtros de Intensidade</button>
						<div class="dropdown-menu"
							 aria-labelledby="dropdownMenuButton">
							<button class="dropdown-item"
							   href="#"
							   onclick="negative()">Negativo</button>
							<button class="dropdown-item"
							   href="#"
							   onclick="log()">Logarítmo</button>
							<button class="dropdown-item"
							   href="#"
							   onclick="pot()">Potência</button>
							<button class="dropdown-item"
							   href="#"
							   onclick="parts()">Linear por Partes</button>
		   
						</div>						
					</div>

					<div class="btn-group">
						<button type="button"
								class="btn
									   btn-dark
									   dropdown-toggle
									   font-weight-bold"
								data-toggle="dropdown"
								aria-haspopup="true"
								aria-expanded="false">Esteganografia</button>
						<div class="dropdown-menu"
							 aria-labelledby="dropdownMenuButton">

							<button class="dropdown-item"
							   href="#"
							   onclick="seek()">Procurar Texto</button> <!-- ??? -->
							<button class="dropdown-item"
							   href="#"
							   onclick="hide()">Esconder Texto</button> <!-- ??? -->   
						</div>						
					</div>

					<!-- PARTE 2 -->
					<div class="btn-group">
						<button type="button"
								class="btn
									   btn-dark
									   dropdown-toggle
									   font-weight-bold"
								data-toggle="dropdown"
								aria-haspopup="true"
								aria-expanded="false">Equalização</button>
						<div class="dropdown-menu"
							 aria-labelledby="dropdownMenuButton">

							<button class="dropdown-item"
							   href="#"
							   onclick="get_hist()">Calcular Histograma</button> <!-- ??? -->
							<button class="dropdown-item"
							   href="#"
							   onclick="equalize()">Equalizar Histograma</button> <!-- ??? -->
						</div>						
					</div>

					<!-- PARTE 3A -->
					<div class="btn-group">
						<button type="button"
								class="btn
									   btn-dark
									   dropdown-toggle
									   font-weight-bold"
								data-toggle="dropdown"
								aria-haspopup="true"
								aria-expanded="false">Suavização</button>
						<div class="dropdown-menu"
							 aria-labelledby="dropdownMenuButton">

							<button class="dropdown-item"
							   href="#"
							   onclick="mean()">Suavização média</button>
							<button class="dropdown-item"
							   href="#"
							   onclick="gauss()">Suavização Gaussiana</button>
							<button class="dropdown-item"
							   href="#"
							   onclick="median()">Mediana</button>
						</div>						
					</div>

					<div>
						<button type="button"
								class="btn
									btn-dark
									font-weight-bold"
								aria-haspopup="true"
								aria-expanded="false"
								onclick="document.querySelector('#panel').style.display = 'block'"
						>
							Convolução
						</button>
					</div>

					<!-- PARTE 3B -->
					<div class="btn-group">
						<button type="button"
								class="btn
									   btn-dark
									   dropdown-toggle
									   font-weight-bold"
								data-toggle="dropdown"
								aria-haspopup="true"
								aria-expanded="false">Aguçamento</button>
						<div class="dropdown-menu"
							 aria-labelledby="dropdownMenuButton">

							 <button class="dropdown-item"
							   href="#"
							   onclick="laplace1()">Laplace 1</button>

							<button class="dropdown-item"
							   href="#"
							   onclick="laplace2()">Laplace 2</button>

							<div class="dropdown-divider"></div>

							<button class="dropdown-item"
							   href="#"
							   onclick="high_boost()">Nitidez High-Boost</button>							
						</div>						
					</div>

					<!-- PARTE 4 -->
					<div class="btn-group">
						<button type="button"
								class="btn
									   btn-dark
									   dropdown-toggle
									   font-weight-bold"
								data-toggle="dropdown"
								aria-haspopup="true"
								aria-expanded="false">Domínio da Frequência</button>
						<div class="dropdown-menu"
							 aria-labelledby="dropdownMenuButton">

							<button class="dropdown-item"
							   href="#">Passa Alta</button> <!-- ??? -->
							<button class="dropdown-item"
							   href="#">Passa Baixa</button> <!-- ??? -->
							<button class="dropdown-item"
							   href="#">Passa Faixa</button> <!-- ??? -->

							<div class="dropdown-divider"></div>

							<button class="dropdown-item"
							   href="#">Rejeita Alta</button> <!-- ??? -->
							<button class="dropdown-item"
							   href="#">Rejeita Baixa</button> <!-- ??? -->
							<button class="dropdown-item"
							   href="#">Rejeita Faixa</button> <!-- ??? -->

							<div class="dropdown-divider"></div>

							<button class="dropdown-item"
							   href="#">Ideal</button> <!-- ??? -->
							<button class="dropdown-item"
							   href="#">Gaussiana</button> <!-- ??? -->						
						</div>						
					</div>

					<!-- PARTE 6 -->
					<div class="btn-group">
						<button type="button"
								class="btn
									   btn-dark
									   dropdown-toggle
									   font-weight-bold"
								data-toggle="dropdown"
								aria-haspopup="true"
								aria-expanded="false">Fourier</button>
						<div class="dropdown-menu"
							 aria-labelledby="dropdownMenuButton">

							<button class="dropdown-item"
							   href="#">Transformada Discreta</button>

							<div class="dropdown-divider"></div>

							<button class="dropdown-item"
							   href="#">Transformada Inversa</button>
						</div>						
					</div>

					<div class="btn-group">
							<button type="button"
									class="btn
										   btn-dark
										   dropdown-toggle
										   font-weight-bold"
									data-toggle="dropdown"
									aria-haspopup="true"
									aria-expanded="false">Cores</button>
							<div class="dropdown-menu"
								 aria-labelledby="dropdownMenuButton">
	
								<button class="dropdown-item"
								   href="#"
								   onclick="grayscale()">Escala de Cinza</button>
								<button class="dropdown-item"
								   href="#"
								   onclick="weighted_grayscale()">Escala de Cinza Ponderada</button>
								<button class="dropdown-item"
								   href="#"
								   onclick="sepia()">Sépia</button>
							</div>						
						</div>
	
					<!-- PARTE 7 -->
					<div class="btn-group">
						<button type="button"
								class="btn
									   btn-dark
									   dropdown-toggle
									   font-weight-bold"
								data-toggle="dropdown"
								aria-haspopup="true"
								aria-expanded="false">Restauração</button>
						<div class="dropdown-menu"
							 aria-labelledby="dropdownMenuButton">

							<button class="dropdown-item"
							   href="#"
							   onclick="geo_mean()">Média Geométrica</button>
							<button class="dropdown-item"
							   href="#"
							   onclick="harm_mean()">Harmônica</button>
							<button class="dropdown-item"
							   href="#"
							   onclick="ch_mean()">Contra-Harmônica</button>
						</div>						
					</div>

					<div class="btn-group">
						<button type="button"
								class="btn
									   btn-dark
									   dropdown-toggle
									   font-weight-bold"
								data-toggle="dropdown"
								aria-haspopup="true"
								aria-expanded="false">Filtros Não Lineares</button>
						<div class="dropdown-menu"
							 aria-labelledby="dropdownMenuButton">

							<button class="dropdown-item"
							   href="#"
							   onclick="sobel()">Sobel</button> <!-- ??? -->
							<button class="dropdown-item"
							   href="#"
							   onclick="binarize()">Binarização</button>							
						</div>						
					</div>

				</div>
				
			</div>

			<div class="col bg-white">
				<section class="row justify-content-center">
					<input type="file" id="file_selector" />
				</section>

				<form
					id="hidden_form"
					method="post"
					enctype="multipart/form-data"
				>
					<input type="hidden" name="image">
				</form>

				<section class="row justify-content-center">
					<figure class="figure">
						<img id="image" alt="Imagem">
					</figure>
				</section>
			</div>

			<div id="panel">
				<section>
					<div>
						Distância do Filtro em X: <span id="dx">0</span>
						<button onclick="decreaseX(event)">-</button>
						<button onclick="increaseX(event)">+</button>
					</div>
					<br />
					<div>
						Distância do Filtro em Y: <span id="dy">0</span>
						<button onclick="decreaseY(event)">-</button>
						<button onclick="increaseY(event)">+</button>
					</div>
					<br />
				
					<table>
						<tr>
							<td>
								<table id="filter">
									<tr class="filter-row">
										<td><input type="number" value="1" class="filter-cell" /></td>
									</tr>
								</table>
							</td>
				
							<td rowspan="3"> * 1/<input type="number" value="1" id="divisor" class="filter-cell" /></td>
						</tr>
					</table>
				</section>

				<button onclick="conv()">Confirmar</button>
				<button
					onclick="document.querySelector('#panel').style.display = 'none'"
				>
					Cancelar
				</button>
	
				<script>
					var dx = 0;
					var dy = 0;
					var divisor = 1;
			
					function createFilterRow() {
						let row = document.createElement("tr");
						row.classList.add("filter-row");
						for (let x = 0; x < 2*dx + 1; x++) {
							row.appendChild(createFilterCell());
						}
						return row;
					}
			
					function createFilterCell() {
						let cell = document.createElement("td");
						let input = document.createElement("input");
						input.type = "number";
						input.classList.add("filter-cell");
						input.value = 0;
						cell.appendChild(input);
						return cell;
					}
			
					function increaseX(ev) {
						dx += 1;
						document.getElementById("dx").innerHTML = dx;
			
						let filter = document.getElementById("filter").children[0];
						for (row of filter.children) {
							row.children[0].insertAdjacentElement("beforeBegin", createFilterCell());
							row.appendChild(createFilterCell());
						}
					}
			
					function decreaseX(ev) {
						if (dx > 0) {
							dx -= 1;
			
							let filter = document.getElementById("filter").children[0];
							for (row of filter.children) {
								row.removeChild(row.children[0]);
								row.removeChild(row.lastChild);
							}
						}
						document.getElementById("dx").innerHTML = dx;
					}
			
					function increaseY(ev) {
						dy += 1;
						document.getElementById("dy").innerHTML = dy;
			
						let rows = document.getElementById("filter").children[0];
						rows.children[0].insertAdjacentElement("beforebegin", createFilterRow());
						rows.appendChild(createFilterRow());
					}
			
					function decreaseY(ev) {
						if (dy > 0) {
							dy -= 1;
			
							let rows = document.getElementById("filter").children[0];
							rows.removeChild(rows.firstChild);
							rows.removeChild(rows.lastChild);
						}
						document.getElementById("dy").innerHTML = dy;
					}
				</script>
			</div>
	
			<div class="card-footer">
				<h6>&#169; Photoweb Team - MTE</h6>
			</div>
			
		</section>
	</body>
</html>
